#!/bin/bash

# staged 파일 중 oxfmt 지원 확장자만 포맷
STAGED=$(git diff --cached --name-only --diff-filter=ACM | grep -E '\.(ts|tsx|js|jsx|json|css)$')

if [ -z "$STAGED" ]; then
  exit 0
fi

echo "$STAGED" | xargs ./node_modules/.bin/oxfmt 2>/dev/null

# 포맷 적용된 파일을 다시 stage
echo "$STAGED" | xargs git add

exit 0
