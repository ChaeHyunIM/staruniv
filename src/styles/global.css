/* StarUniv Global Styles */

@layer reset, base, components, pages;

/* ─── Reset ─── */
@layer reset {
  *,
  *::before,
  *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  body {
    min-height: 100dvh;
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
  }

  img,
  svg {
    display: block;
    max-width: 100%;
  }

  a {
    color: inherit;
    text-decoration: none;
  }

  button,
  input,
  select,
  textarea {
    font: inherit;
    color: inherit;
  }

  ul,
  ol {
    list-style: none;
  }

  table {
    border-collapse: collapse;
    width: 100%;
  }
}

/* ─── Base ─── */
@layer base {
  :root {
    /* ── Surface (warm pink-beige) ── */
    --background: oklch(0.985 0.003 30);
    --foreground: oklch(0.15 0.005 30);
    --card: oklch(0.997 0.002 30);
    --card-foreground: oklch(0.15 0.005 30);
    --muted: oklch(0.96 0.003 30);
    --muted-foreground: oklch(0.40 0.005 30);
    --popover: oklch(0.997 0.002 30);
    --popover-foreground: oklch(0.15 0.005 30);

    /* ── Brand ── */
    --primary: oklch(0.7297 0.1384 260.5699);
    --primary-foreground: oklch(1.0000 0 0);
    --secondary: oklch(0.6332 0.1460 132.7937);
    --secondary-foreground: oklch(1.0000 0 0);
    --accent: oklch(0.7686 0.1647 70.0804);
    --accent-foreground: oklch(0 0 0);
    --destructive: oklch(0.6368 0.2078 25.3313);
    --destructive-foreground: oklch(1.0000 0 0);

    /* ── UI ── */
    --border: oklch(0 0 0);
    --input: oklch(0.5555 0 0);
    --ring: oklch(0.7853 0.1041 274.7134);

    /* ── Chart ── */
    --chart-1: oklch(0.7297 0.1384 260.5699);
    --chart-2: oklch(0.6332 0.1460 132.7937);
    --chart-3: oklch(0.7686 0.1647 70.0804);
    --chart-4: oklch(0.6368 0.2078 25.3313);
    --chart-5: oklch(0.7853 0.1041 274.7134);

    /* ── Success ── */
    --success: oklch(0.72 0.17 142);

    /* ── Race colors (light) ── */
    --race-terran: oklch(0.55 0.18 255);
    --race-zerg: oklch(0.52 0.20 25);
    --race-protoss: oklch(0.60 0.16 80);
    --race-terran-bg: oklch(0.55 0.18 255 / 0.08);
    --race-zerg-bg: oklch(0.52 0.20 25 / 0.08);
    --race-protoss-bg: oklch(0.60 0.16 80 / 0.08);

    /* ── Tier colors (light) ── */
    --tier-s: oklch(0.60 0.16 85);
    --tier-a: oklch(0.55 0 0);
    --tier-b: oklch(0.55 0.10 55);
    --tier-c: oklch(0.50 0.02 240);
    --tier-s-bg: oklch(0.60 0.16 85 / 0.08);
    --tier-a-bg: oklch(0.55 0 0 / 0.08);
    --tier-b-bg: oklch(0.55 0.10 55 / 0.08);
    --tier-c-bg: oklch(0.50 0.02 240 / 0.08);

    /* ── Font ── */
    --font-sans: "IBM Plex Sans KR", system-ui, sans-serif;
    --font-mono: "IBM Plex Mono", ui-monospace, monospace;

    /* ── Radius ── */
    --radius: 1rem;
    --radius-sm: calc(var(--radius) - 4px);
    --radius-md: calc(var(--radius) - 2px);
    --radius-lg: var(--radius);
    --radius-xl: calc(var(--radius) + 4px);

    /* ── Shadow ── */
    --shadow-sm: 0 1px 2px oklch(0 0 0 / 0.04);
    --shadow-md: 0 2px 6px oklch(0 0 0 / 0.08);
    --shadow-lg: 0 4px 16px oklch(0 0 0 / 0.12);
    --shadow-xl: 0 8px 24px oklch(0 0 0 / 0.16);
    --shadow-2xl: 0 16px 48px oklch(0 0 0 / 0.2);

    /* ── Spacing ── */
    --sp-1: 0.25rem;
    --sp-2: 0.5rem;
    --sp-3: 0.75rem;
    --sp-4: 1rem;
    --sp-5: 1.25rem;
    --sp-6: 1.5rem;
    --sp-8: 2rem;
    --sp-10: 2.5rem;
    --sp-12: 3rem;
    --sp-16: 4rem;

    /* ── Typography ── */
    --text-xs: 0.75rem;
    --text-sm: 0.8125rem;
    --text-base: 0.9375rem;
    --text-lg: 1.125rem;
    --text-xl: 1.3125rem;
    --text-2xl: 1.625rem;
    --text-3xl: 2rem;

    --leading-tight: 1.2;
    --leading-normal: 1.5;
    --leading-relaxed: 1.65;

    /* ── Layout ── */
    --content-width: 1200px;
    --nav-height: 56px;
  }

  .dark {
    /* ── Surface (softer dark) ── */
    --background: oklch(0.205 0.006 280);
    --foreground: oklch(0.95 0 0);
    --card: oklch(0.235 0.006 280);
    --card-foreground: oklch(0.95 0 0);
    --muted: oklch(0.30 0.006 280);
    --muted-foreground: oklch(0.68 0 0);
    --popover: oklch(0.235 0.006 280);
    --popover-foreground: oklch(0.95 0 0);

    /* ── Brand ── */
    --primary: oklch(0.7297 0.1384 260.5699);
    --primary-foreground: oklch(1.0000 0 0);
    --secondary: oklch(0.6332 0.1460 132.7937);
    --secondary-foreground: oklch(1.0000 0 0);
    --accent: oklch(0.7686 0.1647 70.0804);
    --accent-foreground: oklch(0 0 0);
    --destructive: oklch(0.6368 0.2078 25.3313);
    --destructive-foreground: oklch(1.0000 0 0);

    /* ── UI ── */
    --border: oklch(1 0 0);
    --input: oklch(0.5555 0 0);
    --ring: oklch(0.7853 0.1041 274.7134);

    /* ── Chart ── */
    --chart-1: oklch(0.7297 0.1384 260.5699);
    --chart-2: oklch(0.6332 0.1460 132.7937);
    --chart-3: oklch(0.7686 0.1647 70.0804);
    --chart-4: oklch(0.6368 0.2078 25.3313);
    --chart-5: oklch(0.7853 0.1041 274.7134);

    /* ── Success ── */
    --success: oklch(0.78 0.18 142);

    /* ── Race colors (dark) ── */
    --race-terran: oklch(0.72 0.15 255);
    --race-zerg: oklch(0.68 0.18 25);
    --race-protoss: oklch(0.78 0.14 85);
    --race-terran-bg: oklch(0.72 0.15 255 / 0.12);
    --race-zerg-bg: oklch(0.68 0.18 25 / 0.12);
    --race-protoss-bg: oklch(0.60 0.16 80 / 0.12);

    /* ── Tier colors (dark) ── */
    --tier-s: oklch(0.82 0.14 85);
    --tier-a: oklch(0.75 0 0);
    --tier-b: oklch(0.68 0.10 55);
    --tier-c: oklch(0.60 0.02 240);
    --tier-s-bg: oklch(0.82 0.14 85 / 0.12);
    --tier-a-bg: oklch(0.75 0 0 / 0.12);
    --tier-b-bg: oklch(0.68 0.10 55 / 0.12);
    --tier-c-bg: oklch(0.60 0.02 240 / 0.12);

    /* ── Shadow (stronger for dark) ── */
    --shadow-sm: 0 1px 2px oklch(0 0 0 / 0.2);
    --shadow-md: 0 2px 6px oklch(0 0 0 / 0.3);
    --shadow-lg: 0 4px 16px oklch(0 0 0 / 0.4);
    --shadow-xl: 0 8px 24px oklch(0 0 0 / 0.5);
    --shadow-2xl: 0 16px 48px oklch(0 0 0 / 0.6);
  }

  html {
    color-scheme: light;
    scroll-behavior: smooth;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  html.dark {
    color-scheme: dark;
  }

  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }

    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  body {
    font-family: var(--font-sans);
    font-size: var(--text-base);
    line-height: var(--leading-normal);
    color: var(--foreground);
    background: var(--background);
  }

  h1, h2, h3, h4 {
    font-family: var(--font-sans);
    font-weight: 600;
    line-height: var(--leading-tight);
    letter-spacing: -0.01em;
    color: var(--foreground);
    text-wrap: balance;
    scroll-margin-top: calc(var(--nav-height) + var(--sp-4));
  }

  h1 { font-size: var(--text-3xl); }
  h2 { font-size: var(--text-2xl); }
  h3 { font-size: var(--text-xl); }
  h4 { font-size: var(--text-lg); }

  /* Scrollbar */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: var(--muted);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--input);
    border-radius: 3px;

    &:hover {
      background: var(--muted-foreground);
    }
  }

  /* Focus visible */
  :focus-visible {
    outline: 2px solid var(--ring);
    outline-offset: 2px;
  }

  /* Selection */
  ::selection {
    background: var(--primary);
    color: var(--primary-foreground);
  }
}

/* ─── Components ─── */
@layer components {
  /* Page wrapper */
  .page {
    max-width: var(--content-width);
    margin-inline: auto;
    padding: var(--sp-8) var(--sp-6);
  }

  .page-header {
    margin-bottom: var(--sp-8);

    & h1 {
      display: flex;
      align-items: center;
      gap: var(--sp-3);

      &::before {
        content: "";
        display: inline-block;
        width: 4px;
        height: 1em;
        background: var(--primary);
        border-radius: 2px;
      }
    }

    & p {
      margin-top: var(--sp-2);
      color: var(--muted-foreground);
      font-size: var(--text-sm);
    }
  }

  /* Card */
  .card {
    background: var(--card);
    border: 1px solid oklch(from var(--border) l c h / 0.15);
    border-radius: var(--radius-md);
    padding: var(--sp-5);
    transition: border-color 0.15s;

    &:hover {
      border-color: oklch(from var(--border) l c h / 0.25);
    }
  }

  /* Table */
  .table-wrap {
    overflow-x: auto;
    border: 1px solid oklch(from var(--border) l c h / 0.15);
    border-radius: var(--radius-md);
    background: var(--card);
  }

  table {
    & th {
      font-family: var(--font-sans);
      font-size: var(--text-xs);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: var(--muted-foreground);
      padding: var(--sp-3) var(--sp-4);
      text-align: left;
      background: var(--muted);
      border-bottom: 1px solid oklch(from var(--border) l c h / 0.15);
      white-space: nowrap;
    }

    & td {
      padding: var(--sp-3) var(--sp-4);
      border-bottom: 1px solid oklch(from var(--border) l c h / 0.1);
      font-size: var(--text-sm);
      font-variant-numeric: tabular-nums;
    }

    & tbody tr {
      transition: background-color 0.1s;

      &:hover {
        background: oklch(from var(--muted) l c h / 0.5);
      }

      &:last-child td {
        border-bottom: none;
      }
    }
  }

  /* Link style */
  .link {
    color: var(--primary);
    transition: color 0.15s;

    &:hover {
      color: var(--ring);
    }
  }

  /* Empty state */
  .empty-state {
    text-align: center;
    padding: var(--sp-16) var(--sp-8);
    color: var(--muted-foreground);
    font-size: var(--text-sm);
  }

  /* Loading */
  .loading {
    text-align: center;
    padding: var(--sp-16) var(--sp-8);
    color: var(--muted-foreground);
    font-size: var(--text-sm);

    &::after {
      content: "";
      display: block;
      width: 24px;
      height: 24px;
      margin: var(--sp-4) auto 0;
      border: 2px solid oklch(from var(--border) l c h / 0.2);
      border-top-color: var(--primary);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
  }

  /* Skip link */
  .skip-link {
    position: absolute;
    top: -100%;
    left: var(--sp-4);
    z-index: 200;
    padding: var(--sp-2) var(--sp-4);
    background: var(--primary);
    color: var(--primary-foreground);
    font-family: var(--font-sans);
    font-size: var(--text-sm);
    font-weight: 600;
    border-radius: var(--radius-sm);
    transition: top 0.15s;

    &:focus {
      top: var(--sp-2);
    }
  }

  @keyframes spin {
    to { transform: rotate(360deg); }
  }
}
